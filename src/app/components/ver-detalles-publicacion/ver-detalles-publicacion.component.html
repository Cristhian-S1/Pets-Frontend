<div class="container" *ngIf="detalles">

  <!-- ====== TÍTULO ====== -->
  <h1 class="titulo">{{ detalles.pu_titulo }}</h1>

  <!-- ====== INFO DEL USUARIO ====== -->
  <div class="autor-card">
    <div>
      <p class="label">Publicación creada por</p>
      <h2 class="autor">{{ nombre }}</h2>
      <p class="contacto">
        Contacto: <span>{{ contacto }}</span>
      </p>
    </div>
  </div>

  <!-- ====== IMAGEN PRINCIPAL (pu_image) ====== -->
  <div class="main-cover-wrapper" *ngIf="detalles.pu_image">
    <img class="main-cover" [src]="detalles.pu_image" alt="Imagen principal" />
  </div>

  <!-- ====== CARRUSEL DE IMÁGENES ADICIONALES ====== -->
  <div class="carousel-wrapper" *ngIf="detalles.imagenes?.length > 0">
    <button class="nav prev" (click)="prev()">&#10094;</button>

    <div class="carousel">
      <img [src]="detalles.imagenes[currentIndex].pui_url" alt="Imagen" class="main-img" />
    </div>

    <button class="nav next" (click)="next()">&#10095;</button>
  </div>

  <!-- MINIATURAS -->
  <div class="thumbnails" *ngIf="detalles.imagenes?.length > 0">
    <img *ngFor="let img of detalles.imagenes; let i = index" [src]="img.pui_url" [class.active]="i === currentIndex"
      (click)="goTo(i)" />
  </div>

  <!-- ====== DESCRIPCIÓN ====== -->
  <div class="card">
    <p class="descripcion">{{ detalles.pu_descripcion }}</p>

    <p class="item"><strong>Ubicación:</strong> {{ detalles.pu_ubicacion }}</p>

    <p class="item"><strong>Fecha:</strong> {{ formatearFecha(detalles.pu_fecha) }}</p>

    <p class="item">
      <strong>Estado:</strong>
      <span [class.encontrado]="detalles.pu_estado" class="estado">
        {{ detalles.pu_estado ? 'Encontrado' : 'Perdido' }}
      </span>
    </p>

    <!-- Etiquetas -->
    <div class="tags">
      <span *ngFor="let tag of detalles.etiquetas" class="tag">
        {{ tag.et_nombre }}
      </span>
    </div>

    <!-- Botón WhatsApp -->
    <button class="btn-whatsapp" (click)="contactar(detalles)">
      Contactar por WhatsApp
    </button>
  </div>
</div>